---
title: "PT2 Simulation"
author: "Leopold Götsch"
date: "2024-03-04"
categories: [interaktiv, simulation, PT2]
---

Streckensimulation mit Demonstration der Interaktiven Möglichkeiten von Jupyter Notebooks.

[PT2 Simulation](https://mybinder.org/v2/gh/lg-eng/jupyter-notebooks/main?labpath=SimulationStreckenverhaltenLaplacePT2.ipynb)


https://docs.sympy.org/latest/modules/physics/control/control.html


## Übertragungsfunktionen

```{python}
from sympy import *
from sympy.abc import s
from sympy.physics.control.lti import TransferFunction
from IPython.display import display, Markdown, Latex 
from sympy.physics.control.control_plots import step_response_plot, step_response_numerical_data

Kp,Ki,Kd,Kpt2,T,D,R,G,F = symbols('Kp,Ki,Kd,Kpt2,T,D,R,G,F')
R,G,F = symbols('R,G,F')

#Zahlenwerte
vals = {Kp: 10, Ki: 1, Kd: 0 ,Kpt2: 1,T:1,D:1}
display(Markdown("Die Werte:"))
display(vals)

#Übertragungsfunktionen des PID Reglers
R_eqrhs = TransferFunction(Kp, 1, s)  + TransferFunction(Ki, s, s) + TransferFunction(Kd * s, 1, s)
display(Markdown('Die Übertragungsfunktion des Reglers:'))
display(Eq(R,R_eqrhs))
display(Markdown("Die Übertragungsfunktion des Reglers mit Werten:"))
R_eqrhs_vals = R_eqrhs.subs(vals).simplify()
display(Eq(R,R_eqrhs_vals))
#Sprungantwort des Reglers
step_response_plot(R_eqrhs_vals) 
```


```{python}


#Übertragungsfunktion der Strecke
display(Markdown("Die Übertragungsfunktion der Strecke:"))
G_eqrhs = TransferFunction(Kpt2, T**2*s**2+2*D*T*s+1, s)
#G_eqrhs = TransferFunction(1, m*s**2 + kd*s + kc, s)
display(Eq(G,G_eqrhs))
display(Markdown("Die Übertragungsfunktion der Strecke mit Werten:"))
G_eqrhs_vals = G_eqrhs.subs(vals).simplify()
display(Eq(G,G_eqrhs_vals))
#Sprungantwort der Strecke
step_response_plot(G_eqrhs_vals) 


#Übertragungsfunktion des geschlossenen Regelkreises
display(Markdown("Die Übertragungsfunktion des geschlossenen Regelkreises:"))
F_eqrhs = (R_eqrhs*G_eqrhs/(TransferFunction(1,1,s)+R_eqrhs*G_eqrhs)).doit()
display(Eq(F,F_eqrhs))
display(Markdown("Die Übertragungsfunktion des geschlossenen Regelkreises mit Werten:"))
F_eqrhs_vals = F_eqrhs.subs(vals).simplify()
display(Eq(F,F_eqrhs_vals))
#Sprungantwort des geschlossenen Regelkreises
step_response_plot(F_eqrhs_vals)
 
```

## Mathematische Operationen
Siehe [Haager, Regelungstechnik – kompetenzorientiert](https://www.hpt.at/verlagsprogramm/schulbuecher/regelungstechnik-kompetenzorientiert)

## Grafische Darstellung
[Bodediagramm](https://docs.sympy.org/latest/modules/physics/control/control_plots.html#bode-plot)


```{python}

from sympy.physics.control.control_plots import bode_plot
bode_plot(F_eqrhs_vals, initial_exp=-4, final_exp=7)
```


### Sprungantwort
[Step response](https://docs.sympy.org/latest/modules/physics/control/control_plots.html#step-response-plot)
Zeigt den Ausgang wenn am Eingang ein Dirac-Impuls angelegt wird. Vergleichbar mit dem Schlag des Klöppels auf die Glocke.

```{python}	
from sympy.physics.control.control_plots import step_response_plot
step_response_plot(F_eqrhs_vals,upper_limit=vals[T]*20)  
```


### Impulsantwortantwort
[Impuls response](https://docs.sympy.org/latest/modules/physics/control/control_plots.html#impulse-response-plot)  
Zeigt den Ausgang wenn am Eingang ein Dirac-Impuls angelegt wird. Vergleichbar mit dem Schlag des Klöppels auf die Glocke.

```{python}
from sympy.physics.control.control_plots import impulse_response_plot
impulse_response_plot(F_eqrhs_vals)
```

### Pol- Nullstellen
[Pole-Zero Plot](https://docs.sympy.org/latest/modules/physics/control/control_plots.html#pole-zero-plot)
Zeigt den Ausgang wenn am Eingang ein Dirac-Impuls angelegt wird. Vergleichbar mit dem Schlag des Klöppels auf die Glocke.

```{python}	
from sympy.physics.control.control_plots import pole_zero_plot
pole_zero_plot(F_eqrhs_vals)   
```
